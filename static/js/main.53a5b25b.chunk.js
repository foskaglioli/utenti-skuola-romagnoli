(this.webpackJsonputenti_romagnoli=this.webpackJsonputenti_romagnoli||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var r=a(2),o=a(0),n=a.n(o),i=a(19),c=a.n(i),s=(a(33),a(20)),l=a(21),u=a(13),m=a(25),d=a(24),p=(a(34),a(63)),b=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var r;Object(s.a)(this,a),r=t.call(this,e);var o=[];return Object.keys(localStorage).forEach((function(e){var t=JSON.parse(localStorage.getItem(e));o.push(t)})),r.state={utenti:o,cs_cognome:"desc",cs_nome:"desc",cs_data_nascita:"desc",cs_email:"desc"},r.onSort=r.onSort.bind(Object(u.a)(r)),r}return Object(l.a)(a,[{key:"onSort",value:function(e,t){var a=this.state.utenti;switch(t){case"cognome":"asc"===this.state.cs_cognome?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_cognome:"desc"===this.state.cs_cognome?"asc":"desc"});break;case"nome":"asc"===this.state.cs_nome?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_nome:"desc"===this.state.cs_nome?"asc":"desc"});break;case"data_nascita":"asc"===this.state.cs_data_nascita?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_data_nascita:"desc"===this.state.cs_data_nascita?"asc":"desc"});break;case"email":"asc"===this.state.cs_email?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_email:"desc"===this.state.cs_email?"asc":"desc"})}}},{key:"creaHeader",value:function(){var e=this;return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"cognome")},children:"Cognome"}),Object(r.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"nome")},children:"Nome"}),Object(r.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"data_nascita")},children:"Data di nascita"}),Object(r.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"email")},children:"E-mail"}),Object(r.jsxs)("th",{className:"utenti_th",children:["Totale utenti: ",this.getNumeroUtenti()]})]})}},{key:"gestisciRimozione",value:function(e){window.confirm("Conferma la cancellazione dell'utente con indirizzo email ".concat(e," ?"))&&this.rimuoviUtenteByMail(e)}},{key:"rimuoviUtenteByMail",value:function(e){Object.keys(localStorage).forEach((function(t){JSON.parse(localStorage.getItem(t)).email===e&&localStorage.removeItem(e)})),window.location.reload()}},{key:"getNumeroUtenti",value:function(){var e=0;return Object.keys(localStorage).forEach((function(t){e++})),e}},{key:"creaRighe",value:function(){var e=this;return this.state.utenti.map((function(t,a){var o=t.cognome,n=t.nome,i=t.data_nascita,c=t.email,s=Object(p.a)(new Date(i),"dd/MM/yyyy");return Object(r.jsxs)("tr",{className:"righe_tabella",children:[Object(r.jsx)("td",{className:"tabella",children:o}),Object(r.jsx)("td",{className:"tabella",children:n}),Object(r.jsx)("td",{className:"tabella",children:s}),Object(r.jsx)("td",{className:"tabella",children:c}),Object(r.jsx)("td",{className:"tabella",children:Object(r.jsx)("button",{type:"button",class:"pulsanteCancella",onClick:function(){return e.gestisciRimozione(c)},children:"Rimuovi utente"})})]},c)}))}},{key:"render",value:function(){return Object(r.jsx)("div",{id:"container_table",children:Object(r.jsx)("table",{id:"utenti",children:Object(r.jsxs)("tbody",{children:[this.creaHeader(),this.creaRighe()]})})})}}]),a}(o.Component),j=a(59),h=a(64),g=a(61),f=a(62),O=a.p+"static/media/logo_skuola.a799d43e.PNG",v=Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function _(e){var t=v();return Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(h.a,{position:"static",style:{textAlign:"right",background:"#007dc3"},children:Object(r.jsxs)(g.a,{children:[Object(r.jsx)("img",{src:O,alt:"Logo"}),Object(r.jsx)(f.a,{variant:"h6",className:t.title,children:e.titolo})]})})})}var k=a(23);a(40);function x(){var e=Object(k.a)(),t=e.register,a=e.handleSubmit,o=function(e){var t=[];t.ok=!0,t.errore="";for(var a=0,r=Object.keys(e);a<r.length;a++){var o=r[a];if("string"===typeof e[o]&&e[o].length>255)return t.ok=!1,t.errore="Tutti i campi devono avere la lunghezza massima di 255 caratteri",t}var c=n(e);if(!c.ok)return t.ok=!1,t.errore=c.errore,t;var s=i(e.email);if(!s.ok)return t.ok=!1,t.errore=s.errore,t;var u=l(e.data_nascita);return u.ok||(t.ok=!1,t.errore=u.errore),t},n=function(e){var t=[];return t.ok=!0,t.errore="",e.cognome?e.nome?e.data_nascita?(e.email||(t.ok=!1,t.errore="Il campo 'E-mail' \xe8 obbligatorio"),t):(t.ok=!1,t.errore="Il campo 'Data di nascita' \xe8 obbligatorio",t):(t.ok=!1,t.errore="Il campo 'Nome' \xe8 obbligatorio",t):(t.ok=!1,t.errore="Il campo 'Cognome' \xe8 obbligatorio",t)},i=function(e){var t=[];return t.ok=!0,t.errore="",e?c(e)?s(e)?(t.ok=!1,t.errore="Indirizzo email gi\xe0 registrato",t):t:(t.ok=!1,t.errore="Il campo email deve rispettare la sintassi: esempio@mail.com ",t):(t.ok=!1,t.errore="Il campo email \xe8 obbligatorio",t)},c=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},s=function(e){return JSON.parse(localStorage.getItem(e))},l=function(e){var t=[];t.ok=!0,t.errore="";var a=u(e);return a.ok?d(e)<18?(t.ok=!1,t.errore="Non \xe8 possibile registrare un utente minorenne",t):t:(t.ok=!1,t.errore=a.errore,t)},u=function(e){var t=[];t.ok=!0,t.errore="";var a=e.split("/"),r=e.split("-"),o=null;if(a.length>1)o=m(a[0],a[1],a[2]);else{if(!(r.length>1))return t.ok=!1,t.errore="Data inserita in un formato non valido (es. data corretta: 01/01/2020)",t;o=m(r[2],r[1],r[0])}return o.ok||(t.ok=o.ok,t.errore=o.errore),t},m=function(e,t,a){var r=[];return r.ok=!0,r.errore="",2!==e.toString().length||parseInt(e)>31||parseInt(e)<1?(r.ok=!1,r.errore="Il giorno inserito non \xe8 possibile",r):2!==t.toString().length||parseInt(t)>12||parseInt(t)<1?(r.ok=!1,r.errore="Il mesi inserito non \xe8 possibile",r):4!==a.toString().length||0===parseInt(a)||parseInt(a)<1850?(r.ok=!1,r.errore="L'anno inserito non \xe8 possibile",r):parseInt(new Date(a,t,0).getDate())<parseInt(e)?(r.ok=!1,r.errore="Il giorno inserito non \xe8 possibile per il mese dell'anno inserito ",r):r},d=function(e){var t=new Date,a=new Date(e),r=t.getFullYear()-a.getFullYear(),o=t.getMonth()-a.getMonth();return(o<0||0===o&&t.getDate()<a.getDate())&&r--,r},p=function(e){e.cognome=b(e.cognome),e.nome=b(e.nome);var t=e.data_nascita.split("/");e.data_nascita=t.length>1?t[2]+"-"+t[1]+"-"+t[0]:e.data_nascita,localStorage.setItem(e.email,JSON.stringify(e)),window.location.reload()},b=function(e){var t=e.split(" ");if(t.length>1){var a=[];return t.forEach((function(e){a.push(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())})),a.join(" ")}return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};return Object(r.jsxs)("div",{id:"div_form_utenti",children:[Object(r.jsx)("span",{className:"add_utente",children:"Aggiungi utente"}),Object(r.jsxs)("form",{className:"form-inline form_utenti",onSubmit:a((function(e){var t=o(e);t.ok?p(e):alert(t.errore)})),children:[Object(r.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(r.jsx)("div",{className:"input-group-prepend",children:Object(r.jsx)("span",{className:"input-group-text",children:"Cognome"})}),Object(r.jsx)("input",{required:!0,autoFocus:!0,type:"text",className:"form-control testo_form",id:"cognome",name:"cognome","aria-label":"Cognome",ref:t})]}),Object(r.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(r.jsx)("div",{className:"input-group-prepend",children:Object(r.jsx)("span",{className:"input-group-text",children:"Nome"})}),Object(r.jsx)("input",{required:!0,type:"text",className:"form-control testo_form",id:"nome",name:"nome","aria-label":"Nome",ref:t})]}),Object(r.jsxs)("div",{className:"input-group campi_form_utenti",children:[Object(r.jsx)("div",{className:"input-group-prepend",children:Object(r.jsx)("span",{className:"input-group-text",children:"Data di nascita"})}),Object(r.jsx)("input",{required:!0,type:"date",className:"form-control testo_form",placeholder:"gg/mm/aaaa",id:"data_nascita",name:"data_nascita","aria-label":"Data di nascita",ref:t})]}),Object(r.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(r.jsx)("div",{className:"input-group-prepend",children:Object(r.jsx)("span",{className:"input-group-text",children:"E-mail"})}),Object(r.jsx)("input",{required:!0,type:"email",className:"form-control testo_form",id:"email",name:"email","aria-describedby":"emailHelp","aria-label":"E-mail",ref:t})]}),Object(r.jsx)("div",{className:"form-group campi_form_utenti",children:Object(r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"SALVA"})})]})]})}c.a.render(Object(r.jsxs)(n.a.StrictMode,{children:[Object(r.jsx)(_,{titolo:"Utenti Skuola"}),Object(r.jsx)(x,{}),Object(r.jsx)(b,{})]}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.53a5b25b.chunk.js.map