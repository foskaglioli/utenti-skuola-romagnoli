(this.webpackJsonputenti_romagnoli=this.webpackJsonputenti_romagnoli||[]).push([[0],{38:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(23),o=a(2),i=a(0),n=a.n(i),s=a(9),c=a.n(s),l=(a(38),a(64)),u=a(69),m=a(67),d=a.p+"static/media/logo_skuola.a799d43e.PNG",p=Object(l.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function b(e){var t=p();return Object(o.jsx)("div",{className:t.root,children:Object(o.jsx)(u.a,{position:"static",style:{textAlign:"right",background:"#007dc3"},children:Object(o.jsx)(m.a,{children:Object(o.jsx)("img",{src:d,alt:"Logo"})})})})}var j=a(28),g=(a(44),a(20));function h(){var e=Object(g.b)(),t=Object(j.a)(),a=t.register,r=t.handleSubmit,i=function(e){var t=[];t.ok=!0,t.errore="";for(var a=0,r=Object.keys(e);a<r.length;a++){var o=r[a];if("string"===typeof e[o]&&e[o].length>255)return t.ok=!1,t.errore="Tutti i campi devono avere la lunghezza massima di 255 caratteri",t}var i=n(e);if(!i.ok)return t.ok=!1,t.errore=i.errore,t;var c=s(e.email);if(!c.ok)return t.ok=!1,t.errore=c.errore,t;var l=u(e.data_nascita);return l.ok||(t.ok=!1,t.errore=l.errore),t},n=function(e){var t=[];return t.ok=!0,t.errore="",e.cognome?e.nome?e.data_nascita?(e.email||(t.ok=!1,t.errore="Il campo 'E-mail' \xe8 obbligatorio"),t):(t.ok=!1,t.errore="Il campo 'Data di nascita' \xe8 obbligatorio",t):(t.ok=!1,t.errore="Il campo 'Nome' \xe8 obbligatorio",t):(t.ok=!1,t.errore="Il campo 'Cognome' \xe8 obbligatorio",t)},s=function(e){var t=[];return t.ok=!0,t.errore="",e?c(e)?l(e)?(t.ok=!1,t.errore="Indirizzo email gi\xe0 registrato",t):t:(t.ok=!1,t.errore="Il campo email deve rispettare la sintassi: esempio@mail.com ",t):(t.ok=!1,t.errore="Il campo email \xe8 obbligatorio",t)},c=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},l=function(e){return JSON.parse(localStorage.getItem(e))},u=function(e){var t=[];t.ok=!0,t.errore="";var a=m(e);return a.ok?p(e)<18?(t.ok=!1,t.errore="Non \xe8 possibile registrare un utente minorenne",t):t:(t.ok=!1,t.errore=a.errore,t)},m=function(e){var t=[];t.ok=!0,t.errore="";var a=e.split("/"),r=e.split("-"),o=null;if(a.length>1)o=d(a[0],a[1],a[2]);else{if(!(r.length>1))return t.ok=!1,t.errore="Data inserita in un formato non valido (es. data corretta: 01/01/2020)",t;o=d(r[2],r[1],r[0])}return o.ok||(t.ok=o.ok,t.errore=o.errore),t},d=function(e,t,a){var r=[];return r.ok=!0,r.errore="",2!==e.toString().length||parseInt(e)>31||parseInt(e)<1?(r.ok=!1,r.errore="Il giorno inserito non \xe8 possibile",r):2!==t.toString().length||parseInt(t)>12||parseInt(t)<1?(r.ok=!1,r.errore="Il mesi inserito non \xe8 possibile",r):4!==a.toString().length||0===parseInt(a)||parseInt(a)<1850?(r.ok=!1,r.errore="L'anno inserito non \xe8 possibile",r):parseInt(new Date(a,t,0).getDate())<parseInt(e)?(r.ok=!1,r.errore="Il giorno inserito non \xe8 possibile per il mese dell'anno inserito ",r):r},p=function(e){var t=new Date,a=new Date(e),r=t.getFullYear()-a.getFullYear(),o=t.getMonth()-a.getMonth();return(o<0||0===o&&t.getDate()<a.getDate())&&r--,r},b=function(e){e.cognome=h(e.cognome),e.nome=h(e.nome);var t=e.data_nascita.split("/");e.data_nascita=t.length>1?t[2]+"-"+t[1]+"-"+t[0]:e.data_nascita,localStorage.setItem(e.email,JSON.stringify(e)),window.location.reload()},h=function(e){var t=e.split(" ");if(t.length>1){var a=[];return t.forEach((function(e){a.push(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())})),a.join(" ")}return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};return Object(o.jsxs)("div",{id:"div_form_utenti",children:[Object(o.jsx)("span",{className:"add_utente",children:"Aggiungi utente"}),Object(o.jsxs)("form",{className:"form-inline form_utenti",onSubmit:r((function(t){var a=i(t);if(a.ok)b(t);else{var r=a.errore;e.error(Object(o.jsx)("div",{style:{color:"#007dc3",backgroundColor:"#FEE300",borderRadius:"6px 6px 6px 6px",paddingTop:"5px",paddingLeft:"7px",paddingRight:"7px",paddingBottom:"1px",fontSize:"18px",fontFamily:"Verdana"},children:r}))}})),children:[Object(o.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"Cognome"})}),Object(o.jsx)("input",{required:!0,autoFocus:!0,type:"text",className:"form-control testo_form",id:"cognome",name:"cognome","aria-label":"Cognome",ref:a})]}),Object(o.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"Nome"})}),Object(o.jsx)("input",{required:!0,type:"text",className:"form-control testo_form",id:"nome",name:"nome","aria-label":"Nome",ref:a})]}),Object(o.jsxs)("div",{className:"input-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"Data di nascita"})}),Object(o.jsx)("input",{required:!0,type:"date",className:"form-control testo_form",placeholder:"gg/mm/aaaa",id:"data_nascita",name:"data_nascita","aria-label":"Data di nascita",ref:a})]}),Object(o.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"E-mail"})}),Object(o.jsx)("input",{required:!0,type:"email",className:"form-control testo_form",id:"email",name:"email","aria-describedby":"emailHelp","aria-label":"E-mail",ref:a})]}),Object(o.jsx)("div",{className:"form-group campi_form_utenti",children:Object(o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"SALVA"})})]})]})}var f=a(25),_=a(26),x=a(18),O=a(30),v=a(29),k=(a(45),a(68)),N=a(27),y=a.n(N),S=a.p+"static/media/arrow-up.668ffa3b.png",C=a.p+"static/media/arrow-down.9edfd30d.png",I=function(e){Object(O.a)(a,e);var t=Object(v.a)(a);function a(e){var r;Object(f.a)(this,a),r=t.call(this,e);var o=[];return Object.keys(localStorage).forEach((function(e){var t=JSON.parse(localStorage.getItem(e));o.push(t)})),r.state={utenti:o,cs_cognome:"desc",cs_nome:"desc",cs_data_nascita:"desc",cs_email:"desc",ultimo_ord:[]},r.onSort=r.onSort.bind(Object(x.a)(r)),r}return Object(_.a)(a,[{key:"onSort",value:function(e,t){var a=this.state.utenti;switch(t){case"cognome":"asc"===this.state.cs_cognome?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_cognome:"desc"===this.state.cs_cognome?"asc":"desc",ultimo_ord:[t,this.state.cs_cognome]});break;case"nome":"asc"===this.state.cs_nome?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_nome:"desc"===this.state.cs_nome?"asc":"desc",ultimo_ord:[t,this.state.cs_nome]});break;case"data_nascita":"asc"===this.state.cs_data_nascita?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_data_nascita:"desc"===this.state.cs_data_nascita?"asc":"desc",ultimo_ord:[t,this.state.cs_data_nascita]});break;case"email":"asc"===this.state.cs_email?a.sort((function(e,a){return e[t].localeCompare(a[t])})):a.sort((function(e,a){return a[t].localeCompare(e[t])})),this.setState({utenti:a,cs_email:"desc"===this.state.cs_email?"asc":"desc",ultimo_ord:[t,this.state.cs_email]})}}},{key:"creaHeader",value:function(){var e=this,t="Click per ordinare";return Object(o.jsxs)("tr",{children:[Object(o.jsxs)("th",{title:t,className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"cognome")},children:["Cognome ",this.state.ultimo_ord.includes("cognome")?Object(o.jsx)("img",{className:"iconaFreccia",src:this.state.ultimo_ord.includes("desc")?C:S}):" "," "]}),Object(o.jsxs)("th",{title:t,className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"nome")},children:["Nome ",this.state.ultimo_ord.includes("nome")?Object(o.jsx)("img",{className:"iconaFreccia",src:this.state.ultimo_ord.includes("desc")?C:S}):" "]}),Object(o.jsxs)("th",{title:t,className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"data_nascita")},children:["Data di nascita ",this.state.ultimo_ord.includes("data_nascita")?Object(o.jsx)("img",{className:"iconaFreccia",src:this.state.ultimo_ord.includes("desc")?C:S}):" "]}),Object(o.jsxs)("th",{title:t,className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"email")},children:["E-mail ",this.state.ultimo_ord.includes("email")?Object(o.jsx)("img",{className:"iconaFreccia",src:this.state.ultimo_ord.includes("desc")?C:S}):" "]}),Object(o.jsxs)("th",{className:"utenti_th",children:["Totale utenti: ",this.getNumeroUtenti()]})]})}},{key:"gestisciRimozione",value:function(e){this.rimuoviUtenteByMail(e)}},{key:"rimuoviUtenteByMail",value:function(e){Object.keys(localStorage).forEach((function(t){JSON.parse(localStorage.getItem(t)).email===e&&localStorage.removeItem(e)})),window.location.reload()}},{key:"getNumeroUtenti",value:function(){var e=0;return Object.keys(localStorage).forEach((function(t){e++})),e}},{key:"creaRighe",value:function(){var e=this;return this.state.utenti.map((function(t,a){var r=t.cognome,i=t.nome,n=t.data_nascita,s=t.email,c=Object(k.a)(new Date(n),"dd/MM/yyyy"),l=r.length>38?r.substring(0,35)+"...":r,u=i.length>38?i.substring(0,35)+"...":i;return Object(o.jsxs)("tr",{className:"righe_tabella",children:[Object(o.jsx)("td",{alt:r,title:r,className:"tabella",children:l}),Object(o.jsx)("td",{alt:i,title:i,className:"tabella",children:u}),Object(o.jsx)("td",{className:"tabella",children:c}),Object(o.jsx)("td",{alt:s,title:s,className:"tabella",children:s}),Object(o.jsx)("td",{className:"tabella",children:Object(o.jsx)(y.a,{className:"btn btn-default pulsanteCancella",textValues:["Rimuovi utente","Confermare?","Sto cancellando..."],isExecuting:!0,showTimer:!0,onClick:function(){return e.gestisciRimozione(s)}})})]},s)}))}},{key:"render",value:function(){return Object(o.jsx)("div",{id:"container_table",children:Object(o.jsx)("table",{id:"utenti",children:Object(o.jsxs)("tbody",{children:[this.creaHeader(),this.creaRighe()]})})})}}]),a}(i.Component);c.a.render(Object(o.jsx)(g.a,Object(r.a)(Object(r.a)({template:function(e){var t=e.style,a=(e.options,e.message);e.close;return Object(o.jsx)("div",{style:t,children:a})}},{position:"top right",timeout:6e3,offset:"30px",transition:"fade"}),{},{children:Object(o.jsxs)(n.a.StrictMode,{children:[Object(o.jsx)(b,{}),Object(o.jsx)(h,{}),Object(o.jsx)(I,{})]})})),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.7d3f0983.chunk.js.map