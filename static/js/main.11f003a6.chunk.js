(this.webpackJsonputenti_romagnoli=this.webpackJsonputenti_romagnoli||[]).push([[0],{37:function(e,t,r){},38:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){"use strict";r.r(t);var a=r(23),o=r(2),n=r(0),i=r.n(n),c=r(9),s=r.n(c),l=(r(37),r(24)),u=r(25),m=r(17),d=r(29),p=r(28),b=(r(38),r(67)),j=function(e){Object(d.a)(r,e);var t=Object(p.a)(r);function r(e){var a;Object(l.a)(this,r),a=t.call(this,e);var o=[];return Object.keys(localStorage).forEach((function(e){var t=JSON.parse(localStorage.getItem(e));o.push(t)})),a.state={utenti:o,cs_cognome:"desc",cs_nome:"desc",cs_data_nascita:"desc",cs_email:"desc"},a.onSort=a.onSort.bind(Object(m.a)(a)),a}return Object(u.a)(r,[{key:"onSort",value:function(e,t){var r=this.state.utenti;switch(t){case"cognome":"asc"===this.state.cs_cognome?r.sort((function(e,r){return e[t].localeCompare(r[t])})):r.sort((function(e,r){return r[t].localeCompare(e[t])})),this.setState({utenti:r,cs_cognome:"desc"===this.state.cs_cognome?"asc":"desc"});break;case"nome":"asc"===this.state.cs_nome?r.sort((function(e,r){return e[t].localeCompare(r[t])})):r.sort((function(e,r){return r[t].localeCompare(e[t])})),this.setState({utenti:r,cs_nome:"desc"===this.state.cs_nome?"asc":"desc"});break;case"data_nascita":"asc"===this.state.cs_data_nascita?r.sort((function(e,r){return e[t].localeCompare(r[t])})):r.sort((function(e,r){return r[t].localeCompare(e[t])})),this.setState({utenti:r,cs_data_nascita:"desc"===this.state.cs_data_nascita?"asc":"desc"});break;case"email":"asc"===this.state.cs_email?r.sort((function(e,r){return e[t].localeCompare(r[t])})):r.sort((function(e,r){return r[t].localeCompare(e[t])})),this.setState({utenti:r,cs_email:"desc"===this.state.cs_email?"asc":"desc"})}}},{key:"creaHeader",value:function(){var e=this;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"cognome")},children:"Cognome"}),Object(o.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"nome")},children:"Nome"}),Object(o.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"data_nascita")},children:"Data di nascita"}),Object(o.jsx)("th",{className:"pointer utenti_th tabella",onClick:function(t){return e.onSort(t,"email")},children:"E-mail"}),Object(o.jsxs)("th",{className:"utenti_th",children:["Totale utenti: ",this.getNumeroUtenti()]})]})}},{key:"gestisciRimozione",value:function(e){window.confirm("Conferma la cancellazione dell'utente con indirizzo email ".concat(e," ?"))&&this.rimuoviUtenteByMail(e)}},{key:"rimuoviUtenteByMail",value:function(e){Object.keys(localStorage).forEach((function(t){JSON.parse(localStorage.getItem(t)).email===e&&localStorage.removeItem(e)})),window.location.reload()}},{key:"getNumeroUtenti",value:function(){var e=0;return Object.keys(localStorage).forEach((function(t){e++})),e}},{key:"creaRighe",value:function(){var e=this;return this.state.utenti.map((function(t,r){var a=t.cognome,n=t.nome,i=t.data_nascita,c=t.email,s=Object(b.a)(new Date(i),"dd/MM/yyyy");return Object(o.jsxs)("tr",{className:"righe_tabella",children:[Object(o.jsx)("td",{className:"tabella",children:a}),Object(o.jsx)("td",{className:"tabella",children:n}),Object(o.jsx)("td",{className:"tabella",children:s}),Object(o.jsx)("td",{className:"tabella",children:c}),Object(o.jsx)("td",{className:"tabella",children:Object(o.jsx)("button",{type:"button",class:"pulsanteCancella",onClick:function(){return e.gestisciRimozione(c)},children:"Rimuovi utente"})})]},c)}))}},{key:"render",value:function(){return Object(o.jsx)("div",{id:"container_table",children:Object(o.jsx)("table",{id:"utenti",children:Object(o.jsxs)("tbody",{children:[this.creaHeader(),this.creaRighe()]})})})}}]),r}(n.Component),g=r(63),h=r(68),f=r(66),x=r.p+"static/media/logo_skuola.a799d43e.PNG",O=Object(g.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function v(e){var t=O();return Object(o.jsx)("div",{className:t.root,children:Object(o.jsx)(h.a,{position:"static",style:{textAlign:"right",background:"#007dc3"},children:Object(o.jsx)(f.a,{children:Object(o.jsx)("img",{src:x,alt:"Logo"})})})})}var _=r(27),k=(r(44),r(20));function N(){var e=Object(k.b)(),t=Object(_.a)(),r=t.register,a=t.handleSubmit,n=function(e){var t=[];t.ok=!0,t.errore="";for(var r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];if("string"===typeof e[o]&&e[o].length>255)return t.ok=!1,t.errore="Tutti i campi devono avere la lunghezza massima di 255 caratteri",t}var n=i(e);if(!n.ok)return t.ok=!1,t.errore=n.errore,t;var s=c(e.email);if(!s.ok)return t.ok=!1,t.errore=s.errore,t;var l=u(e.data_nascita);return l.ok||(t.ok=!1,t.errore=l.errore),t},i=function(e){var t=[];return t.ok=!0,t.errore="",e.cognome?e.nome?e.data_nascita?(e.email||(t.ok=!1,t.errore="Il campo 'E-mail' \xe8 obbligatorio"),t):(t.ok=!1,t.errore="Il campo 'Data di nascita' \xe8 obbligatorio",t):(t.ok=!1,t.errore="Il campo 'Nome' \xe8 obbligatorio",t):(t.ok=!1,t.errore="Il campo 'Cognome' \xe8 obbligatorio",t)},c=function(e){var t=[];return t.ok=!0,t.errore="",e?s(e)?l(e)?(t.ok=!1,t.errore="Indirizzo email gi\xe0 registrato",t):t:(t.ok=!1,t.errore="Il campo email deve rispettare la sintassi: esempio@mail.com ",t):(t.ok=!1,t.errore="Il campo email \xe8 obbligatorio",t)},s=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},l=function(e){return JSON.parse(localStorage.getItem(e))},u=function(e){var t=[];t.ok=!0,t.errore="";var r=m(e);return r.ok?p(e)<18?(t.ok=!1,t.errore="Non \xe8 possibile registrare un utente minorenne",t):t:(t.ok=!1,t.errore=r.errore,t)},m=function(e){var t=[];t.ok=!0,t.errore="";var r=e.split("/"),a=e.split("-"),o=null;if(r.length>1)o=d(r[0],r[1],r[2]);else{if(!(a.length>1))return t.ok=!1,t.errore="Data inserita in un formato non valido (es. data corretta: 01/01/2020)",t;o=d(a[2],a[1],a[0])}return o.ok||(t.ok=o.ok,t.errore=o.errore),t},d=function(e,t,r){var a=[];return a.ok=!0,a.errore="",2!==e.toString().length||parseInt(e)>31||parseInt(e)<1?(a.ok=!1,a.errore="Il giorno inserito non \xe8 possibile",a):2!==t.toString().length||parseInt(t)>12||parseInt(t)<1?(a.ok=!1,a.errore="Il mesi inserito non \xe8 possibile",a):4!==r.toString().length||0===parseInt(r)||parseInt(r)<1850?(a.ok=!1,a.errore="L'anno inserito non \xe8 possibile",a):parseInt(new Date(r,t,0).getDate())<parseInt(e)?(a.ok=!1,a.errore="Il giorno inserito non \xe8 possibile per il mese dell'anno inserito ",a):a},p=function(e){var t=new Date,r=new Date(e),a=t.getFullYear()-r.getFullYear(),o=t.getMonth()-r.getMonth();return(o<0||0===o&&t.getDate()<r.getDate())&&a--,a},b=function(e){e.cognome=j(e.cognome),e.nome=j(e.nome);var t=e.data_nascita.split("/");e.data_nascita=t.length>1?t[2]+"-"+t[1]+"-"+t[0]:e.data_nascita,localStorage.setItem(e.email,JSON.stringify(e)),window.location.reload()},j=function(e){var t=e.split(" ");if(t.length>1){var r=[];return t.forEach((function(e){r.push(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())})),r.join(" ")}return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()};return Object(o.jsxs)("div",{id:"div_form_utenti",children:[Object(o.jsx)("span",{className:"add_utente",children:"Aggiungi utente"}),Object(o.jsxs)("form",{className:"form-inline form_utenti",onSubmit:a((function(t){var r=n(t);if(r.ok)b(t);else{var a=r.errore;e.error(Object(o.jsx)("div",{style:{color:"#007dc3",backgroundColor:"#FFFFFF",borderRadius:"6px 6px 6px 6px",paddingTop:"5px",paddingLeft:"7px",paddingRight:"7px",paddingBottom:"1px",fontSize:"18px",fontFamily:"Verdana"},children:a}))}})),children:[Object(o.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"Cognome"})}),Object(o.jsx)("input",{required:!0,autoFocus:!0,type:"text",className:"form-control testo_form",id:"cognome",name:"cognome","aria-label":"Cognome",ref:r})]}),Object(o.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"Nome"})}),Object(o.jsx)("input",{required:!0,type:"text",className:"form-control testo_form",id:"nome",name:"nome","aria-label":"Nome",ref:r})]}),Object(o.jsxs)("div",{className:"input-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"Data di nascita"})}),Object(o.jsx)("input",{required:!0,type:"date",className:"form-control testo_form",placeholder:"gg/mm/aaaa",id:"data_nascita",name:"data_nascita","aria-label":"Data di nascita",ref:r})]}),Object(o.jsxs)("div",{className:"form-group campi_form_utenti",children:[Object(o.jsx)("div",{className:"input-group-prepend",children:Object(o.jsx)("span",{className:"input-group-text",children:"E-mail"})}),Object(o.jsx)("input",{required:!0,type:"email",className:"form-control testo_form",id:"email",name:"email","aria-describedby":"emailHelp","aria-label":"E-mail",ref:r})]}),Object(o.jsx)("div",{className:"form-group campi_form_utenti",children:Object(o.jsx)("button",{type:"submit",className:"btn btn-primary",children:"SALVA"})})]})]})}s.a.render(Object(o.jsx)(k.a,Object(a.a)(Object(a.a)({template:function(e){var t=e.style,r=(e.options,e.message);e.close;return Object(o.jsx)("div",{style:t,children:r})}},{position:"top right",timeout:2e3,offset:"30px",transition:"fade"}),{},{children:Object(o.jsxs)(i.a.StrictMode,{children:[Object(o.jsx)(v,{}),Object(o.jsx)(N,{}),Object(o.jsx)(j,{})]})})),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.11f003a6.chunk.js.map